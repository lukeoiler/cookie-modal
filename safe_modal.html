<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
<script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>

<!-- The Modal -->
<div id="myModal" class="modal">
  
        <!-- Modal content -->
        <div class="modal-content">
            <h1 class="title">Cookie Einstellungen</h1>
            <p>Wir verwenden Cookies, um Ihnen ein optimales Webseiten-Erlebnis zu bieten. Dazu zählen Cookies, die für den Betrieb der Seite und für die Steuerung unserer kommerziellen Unternehmensziele notwendig sind, sowie solche, die lediglich zu anonymen Statistikzwecken, für Komforteinstellungen oder zur Anzeige personalisierter Inhalte genutzt werden. Sie können selbst entscheiden, welche Kategorien Sie zulassen möchten. Bitte beachten Sie, dass auf Basis Ihrer Einstellungen womöglich nicht mehr alle Funktionalitäten der Seite zur Verfügung stehen. Weitere Informationen finden Sie in unseren Datenschutzhinweisen.</p>
            <br>
            <div class="columns">
                <div class="column">
                    <div class="field">
                        <p class="control">
                            <div class="b-checkbox is-warning">
                                <input class="is-checkradio" id="notwendig" type="checkbox" checked="checked" disabled>
                                <label for="checkbox">
                                    Notwendig
                                </label>
                            </div>
                        </p>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <p class="control">
                            <div class="b-checkbox is-warning">
                                <input id="statistik" class="styled" type="checkbox">
                                <label for="checkbox">
                                    Statistik
                                </label>
                            </div>
                        </p>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <p class="control">
                            <div class="b-checkbox is-warning">
                                <input id="komfort" class="styled" type="checkbox">
                                <label for="checkbox">
                                    Komfort
                                </label>
                            </div>
                        </p>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <p class="control">
                            <div class="b-checkbox is-warning">
                                <input id="personalisierung" class="styled" type="checkbox">
                                <label for="checkbox">
                                    Personalisierung
                                </label>
                            </div>
                        </p>
                    </div>
                </div>
            </div>
		<div class="content is-small">
          <p>Impressum</p>
		</div>
        <br>
        <div class="field is-grouped is-pulled-right">
            <p class="control">
                <button onclick="setDSGVOCookie()" class="button">
    Auswahl bestätigen
    </button>
            </p>
            <p class="control">
                <button onclick="setAllCookies()" class="button is-danger">
    Alle Auswählen
    </button>
            </p>
        </div>
        </div>
</div>

<style>
 /* The Modal (background) */
.modal {
  display: grid; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 9999999; /* Sit on top */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: hidden; /* Enable scroll if needed */
  /* background-color: rgb(0,0,0); /* Fallback color */
   background-color: rgba(33.3,33.3,33.3,0.8);  /* Black w/ opacity */
}

.modal-background {
 background-color: rgba(33.3,33.3,33.3,0.8);  /* Black w/ opacity */
}
  
/* Modal Content/Box */
.modal-content {
  background-color: #fefefe;
  margin: 15% auto; /* 15% from the top and centered */
  padding: 20px;
  border: 1px solid #888;
  width: 80%; /* Could be more or less, depending on screen size */
  max-width: 900px;
}  
</style>

<script>
  
function setPersistentCookie(name, value, expires) {
	var cookie = name + "=" + value + "; path=/; domain=." + location.hostname.replace(/^www\./i, "");
	if (typeof expires !== "undefined") {
		var now = new Date();
		now.setTime(now.getTime() + expires * 24 * 60 * 60 * 1000);
		cookie += "; expires=" + now.toUTCString();
	}

	document.cookie = cookie;
}  
  
function closeModal() {
	var modal = document.getElementById("myModal");
	//modal.classList.remove('is-active');
  	modal.style.display = "none";
}
  
function setDSGVOCookie() {
  
    var notwendig = document.getElementById("notwendig").checked;
    var statistik = document.getElementById("statistik").checked;
    var komfort = document.getElementById("komfort").checked;
    var personalisierung = document.getElementById("personalisierung").checked;
  
  	if(notwendig && !statistik && !komfort && !personalisierung) {
      
      	  	var cookieName = "DSGVOCookie"; 
			var cookieValue = ",1,";
			setPersistentCookie(cookieName, cookieValue, 730);
      		closeModal();
      
    }  else if(notwendig && statistik && !komfort && !personalisierung) {
      
      	  	var cookieName = "DSGVOCookie"; 
			var cookieValue = ",1,2,";
			setPersistentCookie(cookieName, cookieValue, 730);
      		closeModal();
      
    } else if(notwendig && statistik && komfort && !personalisierung) {
      
      	  	var cookieName = "DSGVOCookie"; 
			var cookieValue = ",1,2,3,";
			setPersistentCookie(cookieName, cookieValue, 730);
      		closeModal();
      
    } else if(notwendig && statistik && komfort && personalisierung) {
      
      	  	var cookieName = "DSGVOCookie"; 
			var cookieValue = ",1,2,3,4,";
			setPersistentCookie(cookieName, cookieValue, 730);
      		closeModal(); 
    }

}
  
function checkBoxes(id){
	document.getElementById(id).checked = true;
}
  
function setAllCookies() {
  
			setTimeout(checkBoxes("statistik"), 500);
			setTimeout(checkBoxes("komfort"), 500);
  			setTimeout(checkBoxes("personalisierung"), 500);
  
  			setTimeout(function() {
              
            var cookieName = "DSGVOCookie"; 
			var cookieValue = ",1,2,3,4,";
			setPersistentCookie(cookieName, cookieValue, 730);
      		closeModal();
            
            }, 1500);
  
    }
</script>